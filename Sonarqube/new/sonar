✅ Step-by-Step Commands (Copy-Paste Friendly)

# 1. Stop and remove all containers
sudo docker-compose down
sudo docker rm -f sonarqube sonarqube-postgresql
sudo docker system prune -f

# 2. Remove old volumes and data
sudo rm -rf /opt/sonarqube

# 3. Recreate directories with proper ownership
sudo mkdir -p /opt/sonarqube/postgresql_data
sudo mkdir -p /opt/sonarqube/sonarqube_data
sudo chown -R 1001:1001 /opt/sonarqube
sudo chmod -R 775 /opt/sonarqube

# 4. Create a fresh docker-compose.yml file
cat <<EOF | sudo tee ~/dmp/docker-compose.yml
version: '2'
services:
  postgresql:
    image: docker.io/bitnami/postgresql:16
    volumes:
      - /opt/sonarqube/postgresql_data:/bitnami/postgresql
    environment:
      ALLOW_EMPTY_PASSWORD: "no"
      POSTGRESQL_USERNAME: sonar_pg_user
      POSTGRESQL_PASSWORD: "0fNT0*MB0Di1"
      POSTGRESQL_DATABASE: bitnami_sonarqube

  sonarqube:
    image: docker.io/bitnami/sonarqube:10
    ports:
      - "9000:9000"
    volumes:
      - /opt/sonarqube/sonarqube_data:/bitnami/sonarqube
    depends_on:
      - postgresql
    environment:
      ALLOW_EMPTY_PASSWORD: "no"
      SONARQUBE_DATABASE_HOST: postgresql
      SONARQUBE_DATABASE_PORT_NUMBER: 5432
      SONARQUBE_DATABASE_USER: sonar_pg_user
      SONARQUBE_DATABASE_PASSWORD: "0fNT0*MB0Di1"
      SONARQUBE_DATABASE_NAME: bitnami_sonarqube
      SONARQUBE_USERNAME: "subbusonar"
      SONARQUBE_PASSWORD: "subbu@78612345"
EOF

# 5. Start containers
cd ~/dmp
sudo docker-compose up -d


✅ Access SonarQube
http://<your-server-ip>:9000

Use login:

Username: subbuSonar
Password: subbu@78612345
